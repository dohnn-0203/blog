import{a as X,g as Y,r as Z,u as $,j as E,s as ee,c as te,d as re,P as ne,n as S,K as B,T as W}from"./index-VFCycJiu.js";function ae(a){return X("MuiCard",a)}Y("MuiCard",["root"]);const ie=a=>{const{classes:f}=a;return re({root:["root"]},ae,f)},se=ee(ne,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),ue=Z.forwardRef(function(f,c){const u=$({props:f,name:"MuiCard"}),{className:y,raised:i=!1,...e}=u,r={...u,raised:i},n=ie(r);return E.jsx(se,{className:te(n.root,y),elevation:i?8:void 0,ref:c,ownerState:r,...e})});var G={},w={},k={},D;function oe(){if(D)return k;D=1,Object.defineProperty(k,"__esModule",{value:!0}),k.useCanvasIdentifier=void 0;var a=S(),f=0,c="react-unity-webgl-canvas",u=function(y){var i=(0,a.useState)(0),e=i[0],r=i[1],n=(0,a.useCallback)(function(){r(function(l){return l+1})},[]);if(y!==void 0)return[y,n];var o=(0,a.useMemo)(function(){return[c,f].join("-")},[e]);return[o,n]};return k.useCanvasIdentifier=u,k}var M={},j={},T;function J(){return T||(T=1,Object.defineProperty(j,"__esModule",{value:!0}),j.isBrowserEnvironment=void 0,j.isBrowserEnvironment=typeof window<"u"&&typeof document<"u"),j}var z;function le(){if(z)return M;z=1,Object.defineProperty(M,"__esModule",{value:!0}),M.useUnityLoader=void 0;var a=S(),f=J(),c=function(u){var y=(0,a.useState)("Loading"),i=y[0],e=y[1];return(0,a.useEffect)(function(){if(f.isBrowserEnvironment!==!1){if(u===null){e("Idle");return}var r=window.document.querySelector('script[src="'.concat(u,'"]'));r===null?(r=window.document.createElement("script"),r.type="text/javascript",r.src=u,r.async=!0,r.setAttribute("data-status","loading"),window.document.body.appendChild(r),r.addEventListener("load",function(){return r?.setAttribute("data-status","loaded")}),r.addEventListener("error",function(){return r?.setAttribute("data-status","error")})):e(r.getAttribute("data-status")==="loaded"?"Loaded":"Error");var n=function(o){return e(o.type==="load"?"Loaded":"Error")};return r.addEventListener("load",n),r.addEventListener("error",n),function(){r!==null&&(r.removeEventListener("load",n),r.removeEventListener("error",n),r.remove())}}},[u]),i};return M.useUnityLoader=c,M}var F;function de(){if(F)return w;F=1;var a=w&&w.__awaiter||function(e,r,n,o){function l(t){return t instanceof n?t:new n(function(d){d(t)})}return new(n||(n=Promise))(function(t,d){function b(m){try{s(o.next(m))}catch(I){d(I)}}function _(m){try{s(o.throw(m))}catch(I){d(I)}}function s(m){m.done?t(m.value):l(m.value).then(b,_)}s((o=o.apply(e,r||[])).next())})},f=w&&w.__generator||function(e,r){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,l,t,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=b(0),d.throw=b(1),d.return=b(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function b(s){return function(m){return _([s,m])}}function _(s){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,s[0]&&(n=0)),n;)try{if(o=1,l&&(t=s[0]&2?l.return:s[0]?l.throw||((t=l.return)&&t.call(l),0):l.next)&&!(t=t.call(l,s[1])).done)return t;switch(l=0,t&&(s=[s[0]&2,t.value]),s[0]){case 0:case 1:t=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,l=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!t||s[1]>t[0]&&s[1]<t[3])){n.label=s[1];break}if(s[0]===6&&n.label<t[1]){n.label=t[1],t=s;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(s);break}t[2]&&n.ops.pop(),n.trys.pop();continue}s=r.call(e,n)}catch(m){s=[6,m],l=0}finally{o=t=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(w,"__esModule",{value:!0}),w.Unity=void 0;var c=S(),u=oe(),y=le(),i=(0,c.forwardRef)(function(e,r){var n=(0,c.useState)(null),o=n[0],l=n[1],t=(0,c.useState)(null),d=t[0],b=t[1],_=(0,u.useCanvasIdentifier)(e.id),s=_[0],m=_[1],I=(0,y.useUnityLoader)(e.unityProvider.loaderUrl),A=(0,c.useCallback)(function(x){e.unityProvider.setLoadingProgression(x),x===1&&e.unityProvider.setIsLoaded(!0)},[e.unityProvider]);return(0,c.useEffect)(function(){var x=function(){return a(void 0,void 0,void 0,function(){var U,g,P,v,L;return f(this,function(h){switch(h.label){case 0:if(!o||d||I!=="Loaded")return[2];console.log("React Unity WebGL: Initializing Unity instance..."),e.unityProvider.setUnityInstance(null),b(null),e.unityProvider.setLoadingProgression(0),(L=(v=e.unityProvider).setIsLoaded)===null||L===void 0||L.call(v,!1),e.unityProvider.setInitialisationError(void 0),m(),U={companyName:e.unityProvider.companyName,productName:e.unityProvider.productName,productVersion:e.unityProvider.productVersion,dataUrl:e.unityProvider.dataUrl,frameworkUrl:e.unityProvider.frameworkUrl,codeUrl:e.unityProvider.codeUrl,workerUrl:e.unityProvider.workerUrl,memoryUrl:e.unityProvider.memoryUrl,symbolsUrl:e.unityProvider.symbolsUrl,streamingAssetsUrl:e.unityProvider.streamingAssetsUrl,devicePixelRatio:e.devicePixelRatio,webglContextAttributes:e.unityProvider.webglContextAttributes,cacheControl:e.unityProvider.cacheControl,autoSyncPersistentDataPath:e.unityProvider.autoSyncPersistentDataPath,matchWebGLToCanvasSize:e.matchWebGLToCanvasSize,disabledCanvasEvents:e.disabledCanvasEvents},Object.keys(U).forEach(function(O){(U[O]===null||U[O]===void 0)&&delete U[O]}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,window.createUnityInstance(o,U,A)];case 2:return g=h.sent(),b(g),e.unityProvider.setUnityInstance(g),[3,4];case 3:return P=h.sent(),console.error("React Unity WebGL: Error initializing Unity instance:",P),e.unityProvider.setInitialisationError(P),[3,4];case 4:return[2]}})})},N=function(){return a(void 0,void 0,void 0,function(){var U,g,P;return f(this,function(v){switch(v.label){case 0:return!d||!o?[2]:(console.log("React Unity WebGL: Detaching Unity instance..."),e.unityProvider.setUnityInstance(null),b(null),e.unityProvider.setLoadingProgression(0),(P=(g=e.unityProvider).setIsLoaded)===null||P===void 0||P.call(g,!1),e.unityProvider.setInitialisationError(void 0),U=document.createElement("canvas"),U.id=o.id,U.setAttribute("react-unity-webgl-role","cleanup"),U.style.display="none",document.body.appendChild(U),d.Module.canvas=U,b(null),[4,d.Quit()]);case 1:return v.sent(),document.body.removeChild(U),[2]}})})};return x(),function(){N()}},[o,d,I,e.unityProvider]),(0,c.useImperativeHandle)(r,function(){return o}),(0,c.createElement)("canvas",{ref:l,id:s,style:e.style,className:e.className,tabIndex:e.tabIndex})});return w.Unity=i,w}var R={},C={},V;function ce(){if(V)return C;V=1;var a=C&&C.__spreadArray||function(e,r,n){if(n||arguments.length===2)for(var o=0,l=r.length,t;o<l;o++)(t||!(o in r))&&(t||(t=Array.prototype.slice.call(r,0,o)),t[o]=r[o]);return e.concat(t||Array.prototype.slice.call(r))};Object.defineProperty(C,"__esModule",{value:!0}),C.useEventSystem=void 0;var f=S(),c=J(),u=[],y=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=void 0;return u.forEach(function(l){o=l.apply(void 0,a([e],r,!1))}),o};c.isBrowserEnvironment===!0&&(window.dispatchReactUnityEvent=y);var i=function(){var e=(0,f.useRef)([]),r=(0,f.useCallback)(function(l,t){e.current=a(a([],e.current,!0),[{eventName:l,callback:t}],!1)},[e]),n=(0,f.useCallback)(function(l,t){e.current=e.current.filter(function(d){return d.eventName!==l&&d.callback!==t})},[e]),o=(0,f.useCallback)(function(l){for(var t=[],d=1;d<arguments.length;d++)t[d-1]=arguments[d];var b=e.current.find(function(_){return _.eventName===l});if(!(typeof b>"u"))return b.callback.apply(b,t)},[e]);return(0,f.useEffect)(function(){return u.push(o),function(){u.splice(u.indexOf(o),1)}},[o]),{addEventListener:r,removeEventListener:n}};return C.useEventSystem=i,C}var Q;function ve(){if(Q)return R;Q=1,Object.defineProperty(R,"__esModule",{value:!0}),R.useUnityContext=void 0;var a=S(),f=ce(),c=function(u){var y=(0,a.useState)(null),i=y[0],e=y[1],r=(0,a.useState)(0),n=r[0],o=r[1],l=(0,a.useState)(!1),t=l[0],d=l[1],b=(0,a.useState)(),_=b[0],s=b[1],m=(0,f.useEventSystem)(),I=(0,a.useRef)({companyName:u.companyName,productName:u.productName,productVersion:u.productVersion,codeUrl:u.codeUrl,dataUrl:u.dataUrl,frameworkUrl:u.frameworkUrl,loaderUrl:u.loaderUrl,memoryUrl:u.memoryUrl,symbolsUrl:u.symbolsUrl,streamingAssetsUrl:u.streamingAssetsUrl,workerUrl:u.workerUrl,webglContextAttributes:u.webglContextAttributes,cacheControl:u.cacheControl,autoSyncPersistentDataPath:u.autoSyncPersistentDataPath,setUnityInstance:e,setLoadingProgression:o,setIsLoaded:d,setInitialisationError:s}),A=(0,a.useCallback)(function(v){return i?.SetFullscreen(v?1:0)},[i]),x=(0,a.useCallback)(function(){var v;return(v=i?.Module.canvas)===null||v===void 0?void 0:v.requestPointerLock()},[i]),N=(0,a.useCallback)(function(v,L,h){return i?.SendMessage(v,L,h)},[i]),U=(0,a.useCallback)(function(v,L){var h;return(h=i?.Module.canvas)===null||h===void 0?void 0:h.toDataURL(v,L)},[i]),g=(0,a.useCallback)(function(){var v;return(v=i?.Quit())!==null&&v!==void 0?v:Promise.reject()},[i]),P=(0,a.useCallback)(function(){var v;return(v=i?.GetMetricsInfo)===null||v===void 0?void 0:v.call(i)},[i]);return{unityProvider:I.current,loadingProgression:n,isLoaded:t,initialisationError:_,requestFullscreen:A,requestPointerLock:x,sendMessage:N,takeScreenshot:U,unload:g,getMetricsInfo:P,addEventListener:m.addEventListener,removeEventListener:m.removeEventListener,UNSAFE__unityInstance:i}};return R.useUnityContext=c,R}var q={},p;function fe(){if(p)return q;p=1,Object.defineProperty(q,"__esModule",{value:!0}),q.useUnityMetricsInfo=void 0;var a=S(),f=function(c,u){var y=(0,a.useState)({}),i=y[0],e=y[1];return(0,a.useEffect)(function(){var r=setInterval(function(){var n=c();typeof n>"u"||e(n)},u.interval||1e3);return function(){clearInterval(r)}},[c,u.interval]),i};return q.useUnityMetricsInfo=f,q}var H;function ye(){return H||(H=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.useUnityMetricsInfo=a.useUnityContext=a.Unity=void 0;var f=de();Object.defineProperty(a,"Unity",{enumerable:!0,get:function(){return f.Unity}});var c=ve();Object.defineProperty(a,"useUnityContext",{enumerable:!0,get:function(){return c.useUnityContext}});var u=fe();Object.defineProperty(a,"useUnityMetricsInfo",{enumerable:!0,get:function(){return u.useUnityMetricsInfo}})})(G)),G}var K=ye();const me=()=>{const{unityProvider:a}=K.useUnityContext({loaderUrl:"/blog/assets/webgls/build/Build/build.loader.js",dataUrl:"/blog/assets/webgls/build/Build/build.data",frameworkUrl:"/blog/assets/webgls/build/Build/build.framework.js",codeUrl:"/blog/assets/webgls/build/Build/build.wasm"});return E.jsxs(B,{children:[E.jsxs(B,{p:2,children:[E.jsx(W,{variant:"h6",fontWeight:700,mb:.5,children:"Unity WebGL Test"}),E.jsx(W,{variant:"overline",fontWeight:700,children:"- WebGL 테스트를 위한 화면 (수정중)"})]}),E.jsx(ue,{children:E.jsx(B,{children:E.jsx("div",{style:{width:"100%",height:"70vh"},children:E.jsx(K.Unity,{unityProvider:a,style:{width:"100%",height:"100%"}})})})})]})};export{me as default};
